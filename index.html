<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koy & Best Wedding | Real-time Web App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Prompt', sans-serif; scroll-behavior: smooth; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .bg-red-wedding { background-color: #8B0000; }
        .text-red-wedding { color: #8B0000; }
        .gradient-red { background: linear-gradient(135deg, #8B0000 0%, #4A0404 100%); }
        .wish-card { transition: all 0.3s ease; border-left: 4px solid #8B0000; }
        #wishes-display { max-height: 500px; overflow-y: auto; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <section class="relative h-screen flex items-center justify-center text-white overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-black/40"></div>
        </div>
        <div class="relative z-10 text-center" data-aos="zoom-in">
            <h2 class="text-xl md:text-2xl mb-4 tracking-widest uppercase">The Wedding of</h2>
            <h1 class="text-6xl md:text-8xl font-serif mb-6 italic">Koy & Best</h1>
            <p class="text-lg md:text-2xl border-t border-b border-white py-2 inline-block">12 DECEMBER 2026</p>
        </div>
    </section>

    <section class="py-12 bg-white shadow-sm text-center">
        <div class="flex justify-center gap-6 md:gap-12" id="countdown">
            <div><span id="days" class="text-4xl font-bold text-red-wedding block">00</span><small class="text-gray-400">Days</small></div>
            <div><span id="hours" class="text-4xl font-bold text-red-wedding block">00</span><small class="text-gray-400">Hours</small></div>
            <div><span id="minutes" class="text-4xl font-bold text-red-wedding block">00</span><small class="text-gray-400">Mins</small></div>
            <div><span id="seconds" class="text-4xl font-bold text-red-wedding block">00</span><small class="text-gray-400">Secs</small></div>
        </div>
    </section>


    <section class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-serif text-center mb-16 text-red-wedding" data-aos="fade-up">Our Love Story</h2>
            <div class="relative border-l-2 border-red-800 ml-4 md:mx-auto md:w-2/3">
                <div class="mb-10 ml-6" data-aos="fade-left">
                    <span class="absolute -left-3 w-6 h-6 bg-red-800 rounded-full"></span>
                    <h4 class="font-bold text-xl">First Meet</h4>
                    <p class="text-gray-600">‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å...</p>
                </div>
                <div class="mb-10 ml-6" data-aos="fade-left" data-aos-delay="200">
                    <span class="absolute -left-3 w-6 h-6 bg-red-800 rounded-full"></span>
                    <h4 class="font-bold text-xl">First Date</h4>
                    <p class="text-gray-600">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡∏Å‡∏•‡∏á‡∏•‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ã‡∏∂‡πà‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á</p>
                </div>
                <div class="ml-6" data-aos="fade-left" data-aos-delay="400">
                    <span class="absolute -left-3 w-6 h-6 bg-red-800 rounded-full"></span>
                    <h4 class="font-bold text-xl">The Proposal</h4>
                    <p class="text-gray-600">‡∏Ñ‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏±‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ...</p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-serif text-center mb-12 text-red-wedding" data-aos="fade-up">Gallery</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <img src="https://images.unsplash.com/photo-1511285560929-80b456fea0bc?q=80&w=500" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" data-aos="flip-left">
                <img src="https://images.unsplash.com/photo-1519225421980-715cb0215aed?q=80&w=500" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" data-aos="flip-left" data-aos-delay="100">
                <img src="https://images.unsplash.com/photo-1583939003579-730e3918a45a?q=80&w=500" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" data-aos="flip-left" data-aos-delay="200">
                <img src="https://images.unsplash.com/photo-1522673607200-164883eeca48?q=80&w=500" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" data-aos="flip-left" data-aos-delay="300">
                <img src="https://images.unsplash.com/photo-1465495910483-0d750c1c626e?q=80&w=500" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" data-aos="flip-left" data-aos-delay="400">
                <img src="https://images.unsplash.com/photo-1520854221256-17451cc331bf?q=80&w=500" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" data-aos="flip-left" data-aos-delay="500">
            </div>
        </div>
    </section>



    <section class="py-20 container mx-auto px-4 max-w-6xl">
        <div class="grid lg:grid-cols-2 gap-16">
            
            <div data-aos="fade-right">
                <h3 class="text-3xl font-serif text-red-wedding mb-6">Confirm Attendance</h3>
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <form id="rsvpForm" class="space-y-4">
                        <div>
                            <label class="block text-sm mb-1">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                            <input type="text" id="rsvpName" required class="w-full p-3 bg-gray-50 rounded-lg border focus:ring-2 focus:ring-red-800 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</label>
                            <select id="rsvpCount" class="w-full p-3 bg-gray-50 rounded-lg border outline-none">
                                <option value="1">1 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                <option value="2">2 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                <option value="3">3 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                <option value="4">4 ‡∏ó‡πà‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full gradient-red text-white font-bold py-3 rounded-lg hover:opacity-90 transition">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
                    </form>
                    <p id="rsvpStatus" class="mt-4 text-green-600 font-bold hidden text-center">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö! üéâ</p>
                </div>
            </div>

            <div data-aos="fade-left">
                <h3 class="text-3xl font-serif text-red-wedding mb-6">Send Wishes</h3>
                <div class="bg-white p-6 rounded-2xl shadow-xl border border-gray-100 mb-8">
                    <input type="text" id="wishName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" class="w-full p-3 bg-gray-50 rounded-lg border mb-3 outline-none">
                    <textarea id="wishMessage" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." class="w-full p-3 bg-gray-50 rounded-lg border h-24 outline-none"></textarea>
                    <button id="btnSendWish" class="mt-3 w-full border-2 border-red-800 text-red-800 font-bold py-2 rounded-lg hover:bg-red-800 hover:text-white transition">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£</button>
                </div>

                <div id="wishes-display" class="space-y-4 pr-2">
                    <p class="text-center text-gray-400 italic">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£...</p>
                </div>
            </div>

        </div>
    </section>

    <footer class="py-10 bg-gray-900 text-white text-center">
        <p class="font-serif italic text-2xl">Koy & Best</p>
        <p class="text-sm text-gray-500 mt-2">#KoyBestWedding2026</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, serverTimestamp, query, limitToLast } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // 1. ‡πÉ‡∏™‡πà Config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
            projectId: "YOUR_PROJECT",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- ‡∏£‡∏∞‡∏ö‡∏ö RSVP ---
        const rsvpForm = document.getElementById('rsvpForm');
        rsvpForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('rsvpName').value;
            const count = document.getElementById('rsvpCount').value;

            push(ref(db, 'rsvp'), {
                guestName: name,
                guestCount: count,
                submittedAt: serverTimestamp()
            }).then(() => {
                rsvpForm.reset();
                document.getElementById('rsvpStatus').classList.remove('hidden');
                setTimeout(() => document.getElementById('rsvpStatus').classList.add('hidden'), 3000);
            });
        });

        // --- ‡∏£‡∏∞‡∏ö‡∏ö Send Wishes (Write) ---
        const btnSendWish = document.getElementById('btnSendWish');
        btnSendWish.addEventListener('click', () => {
            const name = document.getElementById('wishName').value;
            const message = document.getElementById('wishMessage').value;

            if(name && message) {
                push(ref(db, 'wishes'), {
                    sender: name,
                    text: message,
                    timestamp: serverTimestamp()
                }).then(() => {
                    document.getElementById('wishName').value = '';
                    document.getElementById('wishMessage').value = '';
                });
            } else {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏Ñ‡∏£‡∏±‡∏ö");
            }
        });

        // --- ‡∏£‡∏∞‡∏ö‡∏ö Display Wishes (Read Real-time) ---
        const wishesDisplay = document.getElementById('wishes-display');
        const wishesRef = query(ref(db, 'wishes'), limitToLast(20)); // ‡∏î‡∏∂‡∏á 20 ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

        onValue(wishesRef, (snapshot) => {
            const data = snapshot.val();
            wishesDisplay.innerHTML = "";
            
            if (data) {
                // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Object ‡πÄ‡∏õ‡πá‡∏ô Array ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà (‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∏‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô)
                const sortedWishes = Object.values(data).reverse();
                
                sortedWishes.forEach(wish => {
                    const card = `
                        <div class="wish-card bg-white p-4 rounded-xl shadow-sm border border-gray-100" data-aos="fade-up">
                            <p class="font-bold text-red-wedding text-lg">${wish.sender}</p>
                            <p class="text-gray-600 mt-1">${wish.text}</p>
                        </div>
                    `;
                    wishesDisplay.innerHTML += card;
                });
            } else {
                wishesDisplay.innerHTML = `<p class="text-center text-gray-400 italic">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£ ‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏™‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö üòä</p>`;
            }
        });
    </script>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 800, once: true });

        // Countdown Timer
        const weddingDate = new Date("Dec 12, 2026 18:00:00").getTime();
        const updateTimer = () => {
            const now = new Date().getTime();
            const d = weddingDate - now;
            document.getElementById("days").innerText = Math.floor(d / (1000 * 60 * 60 * 24));
            document.getElementById("hours").innerText = Math.floor((d % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById("minutes").innerText = Math.floor((d % (1000 * 60 * 60)) / (1000 * 60));
            document.getElementById("seconds").innerText = Math.floor((d % (1000 * 60)) / 1000);
        };
        setInterval(updateTimer, 1000);
        updateTimer();
    </script>
</body>
</html>